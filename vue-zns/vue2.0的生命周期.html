<!DOCTYPE html>
<html>
<head>
    <title></title>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/vue/2.1.3/vue.js"></script>
    <script src="lib/jquery-3.1.0.js"></script>
</head>
<body>

<div id="app" v-all>
	<p id="box">box</p>
	<p v-></p>
    <p v-text="message"></p>
    <p v-text="parseWeek"></p>
    <p v-text="self()"></p>
</div>

<script type="text/javascript">
    
    Vue.directive('',{
    	bind : function(element){
    		console.log('directive运行');
    		// directive是在mounted(挂载完毕)之前执行的,也就是挂载中,这里操作DOM的一切都是可以的
    		$(element).text('directive');
    	}
    });
    
    Vue.directive('all',{
    	bind : function(element){
    		console.log('directive运行');
    		// directive是在mounted(挂载完毕)之前执行的,也就是挂载中,这里操作带指令DOM是可以的
    		console.log($('p'))
    		$(element).find('p').each(function(index){
    			$(this).on('click',function(){
    				alert(index)	
    			});
    		});
    		// 值得一提的是在directive中只能操作element这个元素以内的元素,不能操作全局的元素
    		// 而angular的directive是可以操控所有的DOM元素的
    		// angular的directive更多的是对操作DOM的一个隔离,而vue的directive要弱得多,更纯粹,只能操作带这个指令的元素
    		// 无效
    		$('p').each(function(){
    			$(this).css({
    				fontSize : '30px'
    			})
    		});
    		// 无效
    		$(document).find('p').each(function(){
    			$(this).css({
    				fontSize : '30px'
    			})
    		});
    		
    		// 无效
    		$('#box').css({
    			fontsize : '30px'
    		});
    	}
    });
    
	var app = new Vue({
      	el: '#app',
      	data: {
          	message : "xuxiao is boy" 
      	},
	   	beforeCreate: function () {
	   		var vm = this;
            console.log('beforeCreate构造函数运行,实例开始创建,数据和DOM都没有关联');
            //console.log("el:" + vm.$el);                 // undefined
            //console.log("data:" + vm.$data);             // undefined 
            //console.log("message:" + vm.message);        // undefined
            // 数据没有进来,自然在这里操作数据是无效的
            vm.message= 0;
	    },
	    created: function () {
	    	var vm = this;
	        console.log('created实例创建完毕,数据已经关联实例,但是DOM没有关联');
	        console.log("el:" + vm.$el);                   // undefined
            console.log("data:" + vm.$data);               // 数据已经关联
            console.log("message:" + vm.message);          // 数据已经关联
            console.log('vm.message',vm.message);
            vm.message = 10;
	    },
	    beforeMount: function () {
	    	var vm = this;
	        console.log('beforeMount虚拟DOM技术,DOM挂载前状态');
	        console.log("el: " + (vm.$el));          //虚拟DOM已被初始化
	        console.log(vm.$el);
            console.log("data: " + vm.$data);          // 数据已经关联
            console.log("message: " + vm.message);        // 数据已经关联
            console.log('vm.message',vm.message);
            vm.message = 20;
            // 虚拟DOM技术
            // 在这里可以使用vue数据驱动来改变数据,但是通过jquery找到DOM元素是不行的
            console.log('text',$('#box').text())          // ''
            console.log('box',$('#box').text('5'))        // 无效
           
	    },
	    mounted: function () {
	    	var vm = this;
	    	// computed,methods,directive都在mounted之前,beforeMount之后执行
	        console.log('mounted挂载结束状态');
	        console.log("el: " + vm.$el); //已被初始化
	        console.log(vm.$el);    
            console.log("data: " + vm.$data); //已被初始化
            console.log("message: " + vm.message); //已被初始化 
            // DOM 在这里更新数据会触发updated函数
            vm.message = 30;
            vm.$nextTick(function(){
//          	$('p').css({
//  				color : 'gold'
//  			});
            });
	           
	    },
	    beforeUpdate: function () {
	    	var vm = this;
	        console.log('beforeUpdate 更新前状态===============》');
	        console.log("el: " + vm.$el);
	        console.log(vm.$el);   
	        console.log("data: " + vm.$data); 
	        console.log("message: " + vm.message); 
	    },
	    updated: function () {
	    	var vm = this;
	        console.log('updated');
	        console.log("el     : " + vm.$el);
	        console.log(vm.$el); 
	        console.log("data: " + vm.$data); 
	        console.log("message: " + vm.message); 
	    },
	    beforeDestroy: function () {
	    	var vm = this;
	        console.log('beforeDestroy');
	        console.log("el: " + vm.$el);
	        console.log(vm.$el);    
	        console.log("data: " + vm.$data); 
	        console.log("message: " + vm.message); 
	    },
	    destroyed: function () {
	    	var vm = this;
	        console.log('destroyed 销毁完成状态===============》');
	        console.log("el: " + vm.$el);
	        console.log(vm.$el);  
	        console.log("data: " + vm.$data); 
	        console.log("message: " + vm.message)
	    },
	    methods : {
	    	self : function(){
	    		var vm = this;
	    		console.log('methods运行');
	    	}
	    },
	    computed : {
	    	parseWeek : function(){
	    		var vm = this;
	    		console.log('computed运行')
	    		return '周一'
	    	}
	    }
	});
	
	
</script>
</body>
</html>