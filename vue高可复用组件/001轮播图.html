<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<style type="text/css">
			*{margin:0;padding: 0;box-sizing: border-box;}
			li{
				list-style: none;
			}
			.banner{
				position: relative;
				margin: 50px auto;
				height:210px;width:630px;
				text-align: center;
			}
			ul.pic-ul{
				position: absolute;
				width:100%;height: 100%;
			}
			li.pic-li{
				position: absolute;
				width:100%;height: 100%;
				background-size: cover;
				transition: opacity 3s;
			}
			ul.round-ul{
				display: inline-block;
				margin-top:180px;
			}
			li.round-li{
				border-radius: 50%;position: relative;
				width:15px;height: 15px;margin:0 10px;
				background: #fff;z-index: 30;
				float: left;
			}
			.current{
				background: peru!important;
			}
		</style>
	</head>
	<body>
		<div id="app">
			<div class="banner">
				<ul class="pic-ul">
					<li class="pic-li" v-for="item in imgList" 
						v-bind:style="{ 
							'background-image': 'url(images/'+item.src+')',
							'z-index' : item.zIndex,
							'opacity' : item.opacity
						}">
					</li>
				</ul>
				<ul class="round-ul">
					<li class="round-li" v-for="(item,index) in imgList" v-bind:class="item.class" v-on:click="fade(item,index)"></li>
				</ul>
			</div>
			
		</div>
	</body>
	<script src="js/vue2.0.js"></script>
	<script>
		
		
		new Vue({
			el : '#app',
			data : {
				mostIndex : 10,
				imgList : [
					{ src : 'pic_01.jpg', zIndex : 0 , opacity : 1,class : ''},
					{ src : 'pic_02.jpg', zIndex : 0 , opacity : 1,class : ''},
					{ src : 'pic_03.jpg', zIndex : 0 , opacity : 1,class : ''},
					{ src : 'pic_04.jpg', zIndex : 0 , opacity : 1,class : ''},
				],
				nowIndex : 0,
				lastIndex : 0,
				cycleTimer : null
				
			},
			mounted : function(){
				var vm = this
				
				// init
				vm.lastIndex = vm.nowIndex === 0 ? vm.imgList.length - 1 : vm.nowIndex - 1;
				for(var i = 0; i < vm.imgList.length; i++){
					vm.imgList[i]['zIndex'] = vm.imgList.length - i
				}
				vm.imgList[0]['class'] = 'current';
 				vm.fade();
				
			},
			methods : {
				banner : function(){
					var vm = this
					if( vm.nowIndex > vm.imgList.length - 1){
						vm.nowIndex = 0;
					}
					vm.lastIndex = vm.nowIndex === 0 ? vm.imgList.length - 1 : vm.nowIndex - 1;
					vm.imgList[vm.lastIndex]['zIndex'] = 0
					//vm.imgList[vm.nowIndex]['opacity'] = 0;
					for(var i = 0;i < vm.imgList.length ; i++){
						vm.imgList[i]['class'] = '';
						vm.imgList[i]['zIndex']++;
					}
					
					vm.imgList[vm.nowIndex]['class'] = 'current';
					//vm.imgList[vm.nowIndex]['opacity'] = 1;
					vm.nowIndex++;
				},
				fade : function(item,index){
					var vm = this
					if(item){
						vm.banner();
					}
					
					clearInterval(vm.cycleTimer)
					
					vm.cycleTimer = setInterval(function(){
						
						vm.banner()
						
					},3000)
				}
			}
		})

		
	</script>
</html>
