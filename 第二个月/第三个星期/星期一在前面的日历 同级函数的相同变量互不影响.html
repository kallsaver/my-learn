<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>无标题文档</title>
<style id="css">
*{margin:0px;padding:0px;font-size:0px;}
.calendar{width:600px;height:650px;border:1px solid black;text-align:center;margin:100px auto;position:relative;}

/*select{width:75px;height:30px;border:1px solid #24B5D3;font-size:14px;z-index:3;line-height:30px;padding-left:5px;}

.monthselect{position:absolute;right:-100px}

.yearselect{position:absolute;right:-200px}

option{height:30px;font-size:14px;border-bottom:1px solid #ccc;padding-left:10px;}*/

ul{list-style:none;display:inline-block;}
h2{height:30px;}

.clear:after{content:"200B";display:block;font-size:0px;line-height:0px;clear:both;*zoom:1;}

li{float:left;width:80px;height:40px;font-size:16px;line-height:40px;color:#8ca0a1}

.leftspan{left:100px;width:50px;height:30px;position:absolute;background:#9daec2;z-index:1;top:47px;color:#fff;font-size:26px;line-height:30px;cursor:pointer}

.rightspan{right:100px;width:50px;height:30px;position:absolute;background:#9daec2;z-index:1;top:47px;color:#fff;font-size:26px;line-height:30px;cursor:pointer}
.week{margin-top:20px;}
.week li{font-weight:bolder;}

h3{font-size:24px;line-height:80px;color:red;display:inline-block;width:500px;border-bottom:1px solid #32595e;border-top:1px solid #32595e;position:relative;}

.date{width:560px;}

.date li{float:left;width:40px;height:40px; border-radius:50%; margin:10px 20px;color:green;}

.date .ccc{background:#ccc;color:#fff;}

.date .red{background:#e98758;color:#fff;}

.date .black{background:#4a5569;color:#fff;}

.date .blue{background:#e4bb45 ;color:#fff;font-size:24px;font-weight:bolder;}

.box{width:150px;height:150px;border-radius:50%;border:4px solid #000;position:absolute;right:20px;top:480px;}

.list li{width:2px;height:6px;background:#000; position:absolute; top:0px;left:74px;transform-origin:center 75px;}

.list li:nth-of-type(5n+1){height:15px;}

/*.list li:nth-of-type(2){transform:rotate(6deg);}
.list li:nth-of-type(3){transform:rotate(12deg);}
.list li:nth-of-type(4){transform:rotate(18deg);}
.list li:nth-of-type(5){transform:rotate(24deg);}
.list li:nth-of-type(6){transform:rotate(30deg);}
.list li:nth-of-type(7){transform:rotate(36deg);}
.list li:nth-of-type(8){transform:rotate(42deg);}*/

.ico{width:20px;height:20px;background:#000;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);border-radius:50%;}

.hour{width:8px;height:35px;background:#000; position:absolute;left:71px;top:40px;transform-origin:bottom;}

.min{width:4px;height:45px;background:#066; position:absolute;left:73px;top:30px;transform-origin:bottom;}

.sec{width:2px;height:55px;background:red; position:absolute;left:74px;top:20px;transform-origin:bottom;}
</style>
<script>
window.onload=function(){
	var Ocaldendar=document.getElementsByClassName("calendar")[0];
	var Odate=document.getElementsByClassName("date")[0];
	var before=document.getElementsByClassName("leftspan")[0];
	var after=document.getElementsByClassName("rightspan")[0];
	var Oyearsel=document.getElementsByTagName("select")[1];
	var Omonthsel=document.getElementsByTagName("select")[0];
	
/*	for(var i=0;i<30;i++){
		var yearsel=document.createElement("option");
		yearsel.innerHTML=1990+i;
		yearsel.value=1990+i;
		Oyearsel.appendChild(yearsel);
	}
	
	
	for(var j=1;j<=12;j++){
		var monthsel=document.createElement("option");
		monthsel.innerHTML=(j<10?'0'+j:j);
		monthsel.value=(j<10?'0'+j:j);
		Omonthsel.appendChild(monthsel);
		
	}
	*/
	
	
		
	
	
	//时钟代码-------------------------------------------------------------
	var oList=document.getElementsByClassName("list")[0];
	var oHour=document.getElementsByClassName("hour")[0];
	var oMin=document.getElementsByClassName("min")[0];
	var oSec=document.getElementsByClassName("sec")[0];
	var oCss=document.getElementById("css");

	//添加li并给li加上每个li加上样式
	for(var i=0;i<60;i++){
		oList.innerHTML+='<li></li>';
		oCss.innerHTML+='.list li:nth-of-type('+(i+1)+'){transform:rotate('+i*6+'deg);}';
	}
	
	
	setInterval(function run(){
		var four=new Date();
		
		var isecond=four.getSeconds();
		
		//得出带小数点的分钟数  这个数才准确决定分钟指针的度数
		var iminute=four.getMinutes()+isecond/60;
		
		//得出带小数点的小时数  这个数才准确决定时钟指针的度数
		var ihour=four.getHours()+iminute/60;
		
		//秒钟1秒走6度
		oSec.style.transform="rotate("+(6*isecond)+"deg)";
		
		//分钟1分钟走6度
		oMin.style.transform="rotate("+(6*iminute)+"deg)";
		
		//时钟1小时走30度
		oHour.style.transform="rotate("+(30*ihour)+"deg)";
	
	},1000)
	
	
	

//-------------------------------------------------------------------------
	
	
//注意时间问题有个bug 就是如果当天的时间是30号  下个月没有30号  而拨到下个月 setMonth(month+1) 没有天的参数 会有bug
	//时间实例化
	var four=new Date();
	
	//get.Month等返回值得数据类型是number
	var year=four.getFullYear();
	
	var month=four.getMonth();
	
	var presentyear=year;
	
	var presentmonth=month;
	
	var today=four.getDate();
	
	
	Ocaldendar.style.background="url(images/"+(month+1)+".jpg)";
	
	
	setmonth();
	
	after.onclick=function after(){
		//after的month的增减影响不了before的month  虽然month是个全局变量
		show();
		month++;
		if(month==12){
			year++;
			month=0;
		}
		
		
		console.log(month)
		Odate.innerHTML="";
		
		Ocaldendar.style.background="";
		setmonth();
		
		var aLi=Odate.getElementsByTagName("li");
		
		if(year>presentyear){
			for(var k=0;k<aLi.length;k++){
				aLi[k].className="black";
			}
		}
		else if(year==presentyear&&month>presentmonth){
			for(var k=0;k<aLi.length;k++){
				aLi[k].className="black";
			}
		}
		else if(year==presentyear&&month==presentmonth){
			return;
		}
		else{
			for(var k=0;k<aLi.length;k++){
				aLi[k].className="ccc";
			}
		}
		
		
		
		if(month==8){
			alert(1)
		}
	
		for(var p=0;p<12;p++){
			if(month==p){
				Ocaldendar.style.background="url(images/"+(p+1)+".jpg)";
			}
		}
		
		return month;
		
		
	}
	
	before.onclick=function before(){
		
		//before的month的增减影响不了after的month
		show();
		month--;
		if(month==-1){
			year--;
			month=11;
		}
		
		
				
		Odate.innerHTML="";
		Ocaldendar.style.background="";
		
		setmonth();
		
		var aLi=Odate.getElementsByTagName("li");
		
		if(year>presentyear){
			for(var k=0;k<aLi.length;k++){
				aLi[k].className="black";
			}
		}
		else if(year==presentyear&&month>presentmonth){
			for(var k=0;k<aLi.length;k++){
				aLi[k].className="black";
			}
		}
		else if(year==presentyear&&month==presentmonth){
			return;
		}
		else{
			for(var k=0;k<aLi.length;k++){
				aLi[k].className="ccc";
			}
		}	
		console.log(month)
		if(month==8){
			alert(1)
		}
		
		for(var p=0;p<12;p++){
			if(month==p){
				Ocaldendar.style.background="url(images/"+(p+1)+".jpg)";
			}
		}	
		
		

	}
	
	
	function setmonth(){
		  //把时间拨到下个月的第0天  也就是这个月的最后一天
						
		  four.setMonth(month+1,0); 
		  
		  //这一天的号码就是这个月的天数  记录这个天数  
		  var fullday=four.getDate();
		  
		  //把时间拨到这个月的第一天 求这天的星期号码   four.getDay 0代表星期天 1代表星期一
		  four.setDate(1);
		  
		  var firstday_day=four.getDay();
		  
		  
		  //alert(firstday_day);
		  
		  //因为星期一写在前面   插入空的li 个数为这个月第一天的星期号码减1
		  //并且还有个情况  如果星期天写在前面的日历 得出的firstday_week=0 所以插入0个li
		  //而星期一写在前面的日历 如果这个月的第一天是星期天  得出的firstday_week=0 要插入6个li
		  
		 if(firstday_day==0){
			firstday_day=7;
		 }
		 
		 if(firstday_day==1){
			firstday_day=8;
		 }
		 
		 //把时间拨到这个月的第0天 也就是上个月的最后一天  记录这个天数
		 four.setMonth(month,0); 
		
		 
		 var lastmonthfullday=four.getDate();
		 
		 
		 
		  for(var i=0;i<firstday_day-1;i++){
			  var li=document.createElement("li");
			  li.innerHTML=lastmonthfullday+i-firstday_day+2;
			  Odate.appendChild(li);
		  }
		  
		  for(var i=0;i<fullday;i++){
			  var li=document.createElement("li");		
			  li.innerHTML=i+1;
			  Odate.appendChild(li);
			  
		  }
		  
		  //标记颜色
		  var aLi=Odate.getElementsByTagName("li");
		  
		  for(var i=0;i<aLi.length;i++){
			  if(aLi[i].innerHTML<today||i<firstday_day){
				  aLi[i].className="ccc";

			  }
			  else if(aLi[i].innerHTML==today){
				  aLi[i].className="blue";
			  }
			  else if(i%7==5||i%7==6){
				  
				  aLi[i].className="red";
				  
			  }
			  else{aLi[i].className="black";
				  
			  }	
		  }
		  
		  
		  var title=document.getElementsByTagName("h3")[0];
		  title.innerHTML=year+"年"+(month+1)+"月";
		  
	}
	
	function show (){
		var timer;
		var alpha = 0;
		
		clearInterval(timer);  

		timer = setInterval(function () {
		 alpha +=4;
		Ocaldendar.style.opacity = alpha / 100;
		 if(alpha ==100){
		 clearInterval(timer)
		 }
		},50);
 	}

	
}


</script>

</head>
<body>
<div class="calendar">
	
	<!--<select class="yearselect"></select>
    <select class="monthselect"></select>-->
	<div class="leftspan"> < </div>
    <div class="rightspan"> > </div>
	<h2 class="clear">
    </h2>
	<h3>	<!--<div class="leftspan"> < </div>
    <div class="rightspan"> > </div>-->
    </h3>
    <ul class="week clear">
    	<li>MON</li>
    	<li>TUE</li>
    	<li>WED</li>
    	<li>THU</li>
    	<li>FRI</li>
    	<li>SAT</li>
        <li>SUN</li>  	 
    </ul>
    
    <ul class="date clear"></ul>
    
    <div class="box">
	<ul class="list">
<!--    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>-->
    	
    </ul>
    <div class="hour"></div>
    <div class="min"></div>
    <div class="sec"></div>
    <div class="ico"></div>
</div>

</div>
</body>
</html>
