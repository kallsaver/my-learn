<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>无标题文档</title>
<style type="text/css">
*{margin:0;padding:0;}
p{width:600px;}
.box1{width:200px;height:200px;background:red;position:absolute;}
.box2{width:200px;height:200px;background:green;position:absolute;left:200px;top:500px;}
.box3{width:200px;height:200px;background:blue;position:absolute;left:500px;top:200px;}
h3{width:200px;height:30px;background:blue;cursor:move;}

</style>
<script>
window.onload=function(){
	var box1=document.getElementsByClassName("box1")[0];
	var box2=document.getElementsByClassName("box2")[0];	
	var box3=document.getElementsByClassName("box3")[0];
	var input=document.getElementsByTagName("input")[0];
	var title=document.getElementsByTagName("h3")[0];
	
	
	//子元素的事件必须和父元素的事件相同,才能实现阻止冒泡的效果
	input.onmousedown=function(ev){
		var oEv=ev||window.event;
		
		//阻止冒泡  这里title不是input的父元素 这行可以不写
		oEv.cancelBubble=true;
	
	}
	
	//函数参数可以不用写全
	drag(box1,title);
	drag(box2);
	drag(box3);
	

	
	
	//封装一个函数（工具包） 不把对象封进去 函数参数是一个变量 这个变量的数据类型通常就是object  把封对象进去就不叫工具包了  把对象封进去 参数就要写成字符串了
	function drag(obj,title){
		var title=title || obj;
		
		title.onmousedown=function(ev){
		//记录偏移量  不然鼠标会始终在方块的左上角;
		var oEv=ev||window.event;
		var disX=oEv.clientX-obj.offsetLeft;
		var disY=oEv.clientY-obj.offsetTop;
		var w=obj.offsetWidth;
		var h=obj.offsetHeight;
		var screenW=document.documentElement.clientWidth;
		var screenH=document.documentElement.clientHeight;
		
			
				//	
			document.onmousemove=function(ev){
					var oEv=ev||window.event;
					//oEv.clientX是指鼠标的x轴坐标,是number类型的变量;
					var l=oEv.clientX;
					var t=oEv.clientY;
					
					
					//行内样式有width和height,js才可以获得样式的数据,数据类型为string,js无法获取行外样式,但是js可以用offsetWidth获得div的宽度,但是offsetWidth的数据类型是number,是系统算出来的;
					//var w=parseInt(box.style.width);	
					//var h=parseInt(box.style.height);
					obj.style.left=l-disX+"px";
					obj.style.top=t-disY+"px";
					
					//这里的if要写在后面判断,是因为后面的会把前面的冲点,如果if写在前面,等于没写
					
					//这里的if不用嵌套判断,嵌套判断会卡,因为每执行一次,都要执行if里面的内容一次
					
					//而这里的结构,只有满足if的条件,才会执行if里面的内容,所以动画效果流畅
					
					if(l-disX<0){
						obj.style.left=0+"px";
						
					}
					
					
					if(l-disX+w>screenW){
						obj.style.left=screenW-w+"px";
					}
					
					if(t-disY<0){
						obj.style.top=0+"px";
					}
					
					if(t-disY+h>screenH){
						obj.style.top=screenH-h+"px";
					}
					
					
		}
			//这里用document    以下代码放外面一层也可以实现
				document.onmouseup=function(){
				//鼠标移动不再有功能
				document.onmousemove=null;
		}
		
		return false;
		
		}
		
	}
	
		//标题点击触发事件
	

}

</script>
</head>

<body>
<div class="box1">
	<h3></h3>
	<input type="text">
</div>

<div class="box2"></div>
<div class="box3"></div>
</body>
</html>