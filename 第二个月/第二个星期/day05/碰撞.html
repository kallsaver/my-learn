<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>无标题文档</title>
<style>
*{margin:0;padding:0;}
.div1{width:50px;height:50px; background:#ccc; position:absolute;top:0;left:0; z-index:1 }
.div2{width:200px;height:200px; position:absolute;top:300px;left:400px; background:#ddd; }
.div2 h3{ height:40px; line-height:40px; border-bottom:1px solid #000; text-indent:1em;}
.div2 p{ padding:10px; font-size:18px}
</style>
<script>
window.onload=function()
{
	var oDiv1=document.getElementsByTagName('div')[0];
	var oDiv2=document.getElementsByTagName('div')[1];
	
	var duang=false;//碰撞状态
	
	var t_n=0//累计衬衫数量
	
	oDiv1.onmousedown=function(ev){
		var oEv=ev||event;
		var disX=oEv.clientX-oDiv1.offsetLeft;//技术偏移
		var disY=oEv.clientY-oDiv1.offsetTop;
		
		//oDiv1原始位置
		var old_l=oDiv1.offsetLeft;
		var old_t=oDiv1.offsetTop;
		
		
		
		document.onmousemove=function(ev){
			var oEv=ev||event;
			oDiv1.style.top=oEv.clientY-disY+'px';
			oDiv1.style.left=oEv.clientX-disX+'px';
			
			var A_l=oDiv1.offsetLeft;// A_pink
			var A_r=A_l+oDiv1.offsetWidth; // A_green
			var A_t=oDiv1.offsetTop; //A_red
			var A_b=A_t+oDiv1.offsetHeight;// A_blue
			
			//console.log(A_l,A_r,A_t,A_b);
			var B_l=oDiv2.offsetLeft; //B_green
			var B_r=B_l+oDiv2.offsetWidth; //B_pink
			var B_t=oDiv2.offsetTop;// B_blue
			var B_b=B_t+oDiv2.offsetHeight; //B_red
			
			//判断碰撞
			if(A_t>B_b || A_r<B_l ||A_b<B_t || A_l>B_r)
			{
				//碰不上
				oDiv2.style.background='#ddd';	
				duang=false;
			}
			else
			{
				oDiv2.style.background='yellow';
				duang=true;	
			}
		};
		
		document.onmouseup=function(){
			document.onmousemove=null;
			
			if(duang){
				t_n++;
				oDiv2.innerHTML='<h3>购物车</h3><p>您购买了'+t_n+'件衬衫</p>';
				duang=false;
			}
			
			
			
			
			//oDiv1回到原位置
			oDiv1.style.left=old_l+'px';
			oDiv1.style.top=old_t+'px';
			oDiv2.style.background='#ddd';	
			
		};
		return false;
			
	};
};
</script>
</head>

<body>

<div class="div1">衬衫</div>

<div class="div2">
	<h3>购物车</h3>
    <p>欢迎选购</p>

</div>
</body>
</html>
