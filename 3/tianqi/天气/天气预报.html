<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        #box {
            width: 600px;
            height: 400px;
            background: -webkit-linear-gradient(top, #a04d9b 20%, #ee9a56);
            font-size: 12px;
            color: #fff;
            font-family: "微软雅黑";
            position: relative;
            -moz-box-shadow:2px 2px 10px #06c;
            -webkit-box-shadow:2px 2px 10px #06c;
            box-shadow:2px 2px 10px #06c;
			margin:100px auto
        }

        /*#box:hover{-moz-box-shadow:0 0 10px #06c;
            -webkit-box-shadow:0 0 10px #06c;
            box-shadow:0 0 10px #06c;}*/

        /*#box:hover{-moz-box-shadow:2px 2px 10px #06c;
            -webkit-box-shadow:2px 2px 10px #06c;
            box-shadow:2px 2px 10px #06c;}*/

        * {
            margin: 0px;
            padding: 0px;
        }

        .clear:after {
            content: "200B";
            display: block;
            font-size: 0px;
            line-height: 0px;
            clear: both;
            *zoom: 1;
        }

        ul {
            list-style: none;
            overflow: hidden;
        }

        #day {
            padding-left: 30px;
            line-height: 50px;
        }

        h3 {
            font-weight: normal;
            line-height: 25px;
        }

        h4 {
            color: #ddd;
            line-height: 25px;
            font-weight: normal;
        }

        li {
            width: 15%;
            height: 200px;
            float: left;
            position: relative;
            text-align: center;
            outline: 1px solid rgba(241, 227, 227, 0.3)
        }

        /*li::before{content: "";width: 1px;height:250px;right:-1px;top:0px;position: absolute;background: #ffffeb;z-index: 2;opacity: 0.3}*/
        #today {
            width: 40%;
        }

        .pic {
            padding: 0px 0px 5px 0px;
            text-align: center;
        }

        .pic img {
            width: 70px
        }

        p {
            line-height: 25px
        }

        #today img {
            width: 95px;
        }

        .bigpic {
            padding-top: 10px;
        }

        h2 {
            font-size: 26px;
            line-height: 40px;
            font-weight: normal;
            margin-top: -10px;
        }

        select {
            width: 80px;
            display: block;
            height: 25px;
            -moz-box-shadow:2px 2px 10px #06c;
            -webkit-box-shadow:2px 2px 10px #06c;
            box-shadow:2px 2px 10px #06c;
			position:absolute;
			z-index:10
        }

        #top {
            position: relative;
        }

        #top > img {
            width: 600px;
            height: 250px;
            opacity: 0.4;
            position: absolute;
            top: 0px;
            left: 0px;
            display: none
        }

        #box>img{width: 600px;height: 400px; opacity: 0.4;display: none;position: absolute;}

        #model {
            display: none;
            width: 15%;
            height: 250px;
            position: absolute;
            top: 0px;
            left: 0px;
            background: -webkit-linear-gradient(top, rgba(204, 204, 204, 0.1) 20%, rgba(204, 204, 204, 0.4));
            z-index: 2
        }
        #bot{position: relative;height: 150px;}
        #bot>img{position: absolute;top:0px;left: 50%;transform: translateX(-50%);height: 150px;opacity: 0.4;display: none;}
		
		.pics{position:absolute;}
    </style>
    <script src="js/hxsd_tools.js"></script>
    <script src="js/ajax.js"></script>

    <script>
        window.onload = function () {
            var box = document.getElementById("box");
            var select = document.getElementsByTagName("select")[0];
            var top=document.getElementById("top");
            var bot=document.getElementById("bot")
			var pics=document.getElementsByClassName("pics")[0]

            run("深圳")
			select.style.left=hxsd_tools.offsetLeft(box)-select.offsetWidth+"px"
			pics.style.left=hxsd_tools.offsetLeft(box)+box.offsetWidth-pics.offsetWidth+"px"
			pics.style.top=hxsd_tools.offsetTop(box)+"px"
			
            select.onchange = function () {
                top.innerHTML = ''
                var address = select.value
                run(address)

            }
		
			//响应式
			window.onresize=function(){
				select.style.left=hxsd_tools.offsetLeft(box)-select.offsetWidth+"px";
				pics.style.left=hxsd_tools.offsetLeft(box)+box.offsetWidth-pics.offsetWidth+"px"
			}

            function run(city) {
                box.children[0].style.display="block";
                var url = "http://apis.baidu.com/apistore/weatherservice/recentweathers?cityname=" + city;
                var html = "";

                $.baiduGetJSON(url, function (data) {
                    box.children[0].style.display="none";
                    html+= '<img id="img" src="images/dong.gif">'+
                            '<div id="model"></div>';
                    html += '<h3 id="day">' + city + '&nbsp' + data.retData.today.week + '&nbsp' + data.retData.today.date + '&nbsp(实时&nbsp:&nbsp' + data.retData.today.curTemp + ')</h3>' +
                            '<ul>' +
                            '<li id="today">' +
                            '<div class="bigpic"><img src="images/' + weather.parseIcon(data.retData.today["type"]) + '"></div>' +
                            '<h2>' + data.retData.today.hightemp + '~' + data.retData.today.lowtemp + '</h2>' +
                            '<p>' + data.retData.today.type + '</p>' +
                            '<p>' + data.retData.today.fengxiang + data.retData.today.fengli + '</p>' +
                            '</li>';
                    for (var i = 0; i < data.retData.forecast.length; i++) {
                        html += '<li>' +
                                '<h3>' + data.retData.forecast[i].week + '</h3>' +
                                '<h4>' + data.retData.forecast[i].date + '</h4>' +
                                '<div class="pic"><img src="images/' + weather.parseIcon(data.retData.forecast[i]["type"]) + '"></div>' +
                                '<p>' + data.retData.forecast[i].hightemp + '~' + data.retData.forecast[i].lowtemp + '</p>' +
                                '<p>' + data.retData.forecast[i].type + '</p>' +
                                '<p>' + data.retData.forecast[i].fengxiang + data.retData.forecast[i].fengli + '</p>' +
                                '</li>'
                    }

                    //这里会把所有的结构冲掉 有bug
                    html += '</ul>'
                    top.innerHTML += html;
                    var img = document.getElementById("img");
                    var model = document.getElementById("model");
                    var aLi = box.getElementsByTagName("li");
                    var ul = box.getElementsByTagName("ul")[0];

                    ul.parentNode.onmouseleave = function (ev) {
                        model.style.display = "none"
						hxsd_tools.move(pics,{"top":hxsd_tools.offsetTop(box)},500,function(){
								img.style.display = "none";
                            	bot.children[0].style.display = "none";
							})
                    }

                    for (var k = 1; k < aLi.length; k++) {
                        aLi[k].onmouseenter = function () {
                            model.style.display = "block"
                            model.style.left = this.offsetLeft + "px";           
							hxsd_tools.move(pics,{"top":hxsd_tools.offsetTop(box)-pics.offsetHeight},500,function(){
								img.style.display = "block";
                            	bot.children[0].style.display = "block";
							})
                        }
                    }
                })

            }

        }

    </script>
</head>
<body>
<select>
    <option>深圳</option>
    <option>广州</option>
    <option>上海</option>
    <option>北京</option>
    <option>杭州</option>
    <option>成都</option>
    <option>郑州</option>
    <option>西安</option>
    <option>哈尔滨</option>
    <option>武汉</option>
    <option>南京</option>
</select>
<img class="pics" src="images/bbb.gif">
<div id="box">
    <img src="images/doge.gif">
    <div id="top">
        <!--<img id="img" src="images/dong.gif">
        <div id="model"></div>
        <h3 id="day">周日 10月</h3>
        <ul>
            <li id="today">
                <div class="bigpic"><img src="images/1_03.png"></div>
                <h2>28</h2>
                <p>阴</p>
                <p>微风</p>
            </li>
            <li>
                <h3>周一</h3>
                <h4>10月10</h4>
                <div class="pic"><img src="images/1_03.png"></div>
                <p>27~24</p>
                <p>27~24</p>
                <p>27~24</p>

            </li>
            <li></li>
            <li></li>
            <li></li>
        </ul>-->
    </div>
    <div id="bot"><img src="images/bukaniang.gif"></div>
</div>
</body>
</html>