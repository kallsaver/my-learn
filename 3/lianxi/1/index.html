<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="js/lib/angular.min.js"></script>
    <script src="js/lib/angular-route.min.js"></script>
    <script>
        var myapp=angular.module("myapp",[])
        myapp.controller("myCtrl",function($scope,$http){
           /* var url="data/comment.json"

            $http.get(url).success(function(data){

                console.log(data);
                $scope.data = data;

            });*/


           $scope.data=[
               {"name":"é˜¿å°¼ç›","comment":"æ¯”å¦‚ç°åœ¨å»è¶…å¸‚è´­ç‰©éƒ½è¦è‡ªå·±æé’±ä¹°å¡‘æ–™è¢‹äº†","imgsrc":"images/001.jpg"},
               {"name":"æˆ‘æ˜¯çº¢åŒ…","comment":"åªå…è®¸ç”Ÿäº§ç¯ä¿å‹å¡‘æ–™,ä»·æ ¼ä¸Šæ¥äº†è‡ªç„¶äººçæƒœ","imgsrc":"images/002.jpg"},
               {"name":"æ¡æ¡æ¡ƒå­","comment":"å’Œè¶…å¸‚å¡‘æ–™è¢‹ä¸€æ ·çš„æ ‡å‡†ï¼Ÿ","imgsrc":"images/004.jpg"},
               {"name":"ä¸‡äº‹å±‹å°ç¦","comment":"äººå®¶æ—¥æœ¬å‘å¿«é€’ï¼Œèƒ¶å¸¦ç®±å­","imgsrc":"images/005.jpg"},
               {"name":"på¹³ä¸œè½®èƒåº—","comment":"å¿«é€’åªèƒ½æœ3å®¶ï¼Œäº¬ä¸œã€é¡ºä¸°å’Œè¢«éª‚æˆç‹—çš„EMS","imgsrc":"images/006.jpg"},
               {"name":"fedfdfjdoshg","comment":"çœ‹åˆ°äº†å•†æœºæœ‰æ²¡æœ‰","imgsrc":"images/007.jpg"},
               {"name":"æˆ‘å…ˆèµšä»–ä¸€ä¸ªäº¿","comment":"æ€ä¹ˆä¸è¯´å»ºå»ºç­‘åƒåœ¾å¯ä»¥ä¸€å¹´å¡«å¹³å¤ªå¹³æ´‹å‘¢ã€‚ğŸ‡¨ğŸ‡³","imgsrc":"images/008.jpg"},
               {"name":"é˜¿å°¼ç›","comment":"æ¯”å¦‚ç°åœ¨å»è¶…å¸‚è´­ç‰©éƒ½è¦è‡ªå·±æé’±ä¹°å¡‘æ–™è¢‹äº†","imgsrc":"images/001.jpg"},
               {"name":"æˆ‘æ˜¯çº¢åŒ…","comment":"åªå…è®¸ç”Ÿäº§ç¯ä¿å‹å¡‘æ–™,ä»·æ ¼ä¸Šæ¥äº†è‡ªç„¶äººçæƒœ","imgsrc":"images/002.jpg"},
               {"name":"æ¡æ¡æ¡ƒå­","comment":"å’Œè¶…å¸‚å¡‘æ–™è¢‹ä¸€æ ·çš„æ ‡å‡†ï¼Ÿ","imgsrc":"images/004.jpg"},
               {"name":"ä¸‡äº‹å±‹å°ç¦","comment":"äººå®¶æ—¥æœ¬å‘å¿«é€’ï¼Œèƒ¶å¸¦ç®±å­","imgsrc":"images/005.jpg"},
               {"name":"på¹³ä¸œè½®èƒåº—","comment":"å¿«é€’åªèƒ½æœ3å®¶ï¼Œäº¬ä¸œã€é¡ºä¸°å’Œè¢«éª‚æˆç‹—çš„EMS","imgsrc":"images/006.jpg"},
               {"name":"fedfdfjdoshg","comment":"çœ‹åˆ°äº†å•†æœºæœ‰æ²¡æœ‰","imgsrc":"images/007.jpg"},
               {"name":"æˆ‘å…ˆèµšä»–ä¸€ä¸ªäº¿","comment":"æ€ä¹ˆä¸è¯´å»ºå»ºç­‘åƒåœ¾å¯ä»¥ä¸€å¹´å¡«å¹³å¤ªå¹³æ´‹å‘¢ã€‚ğŸ‡¨ğŸ‡³","imgsrc":"images/008.jpg"},
               {"name":"é˜¿å°¼ç›","comment":"æ¯”å¦‚ç°åœ¨å»è¶…å¸‚è´­ç‰©éƒ½è¦è‡ªå·±æé’±ä¹°å¡‘æ–™è¢‹äº†","imgsrc":"images/001.jpg"},
               {"name":"æˆ‘æ˜¯çº¢åŒ…","comment":"åªå…è®¸ç”Ÿäº§ç¯ä¿å‹å¡‘æ–™,ä»·æ ¼ä¸Šæ¥äº†è‡ªç„¶äººçæƒœ","imgsrc":"images/002.jpg"},
               {"name":"æ¡æ¡æ¡ƒå­","comment":"å’Œè¶…å¸‚å¡‘æ–™è¢‹ä¸€æ ·çš„æ ‡å‡†ï¼Ÿ","imgsrc":"images/004.jpg"},
               {"name":"ä¸‡äº‹å±‹å°ç¦","comment":"äººå®¶æ—¥æœ¬å‘å¿«é€’ï¼Œèƒ¶å¸¦ç®±å­","imgsrc":"images/005.jpg"},
               {"name":"på¹³ä¸œè½®èƒåº—","comment":"å¿«é€’åªèƒ½æœ3å®¶ï¼Œäº¬ä¸œã€é¡ºä¸°å’Œè¢«éª‚æˆç‹—çš„EMS","imgsrc":"images/006.jpg"},
               {"name":"fedfdfjdoshg","comment":"çœ‹åˆ°äº†å•†æœºæœ‰æ²¡æœ‰","imgsrc":"images/007.jpg"},
               {"name":"æˆ‘å…ˆèµšä»–ä¸€ä¸ªäº¿","comment":"æ€ä¹ˆä¸è¯´å»ºå»ºç­‘åƒåœ¾å¯ä»¥ä¸€å¹´å¡«å¹³å¤ªå¹³æ´‹å‘¢ã€‚ğŸ‡¨ğŸ‡³","imgsrc":"images/008.jpg"},
               {"name":"é˜¿å°¼ç›","comment":"æ¯”å¦‚ç°åœ¨å»è¶…å¸‚è´­ç‰©éƒ½è¦è‡ªå·±æé’±ä¹°å¡‘æ–™è¢‹äº†","imgsrc":"images/001.jpg"},
               {"name":"æˆ‘æ˜¯çº¢åŒ…","comment":"åªå…è®¸ç”Ÿäº§ç¯ä¿å‹å¡‘æ–™,ä»·æ ¼ä¸Šæ¥äº†è‡ªç„¶äººçæƒœ","imgsrc":"images/002.jpg"},
               {"name":"æ¡æ¡æ¡ƒå­","comment":"å’Œè¶…å¸‚å¡‘æ–™è¢‹ä¸€æ ·çš„æ ‡å‡†ï¼Ÿ","imgsrc":"images/004.jpg"},
               {"name":"ä¸‡äº‹å±‹å°ç¦","comment":"äººå®¶æ—¥æœ¬å‘å¿«é€’ï¼Œèƒ¶å¸¦ç®±å­","imgsrc":"images/005.jpg"},
               {"name":"på¹³ä¸œè½®èƒåº—","comment":"å¿«é€’åªèƒ½æœ3å®¶ï¼Œäº¬ä¸œã€é¡ºä¸°å’Œè¢«éª‚æˆç‹—çš„EMS","imgsrc":"images/006.jpg"},
               {"name":"fedfdfjdoshg","comment":"çœ‹åˆ°äº†å•†æœºæœ‰æ²¡æœ‰","imgsrc":"images/007.jpg"},
               {"name":"æˆ‘å…ˆèµšä»–ä¸€ä¸ªäº¿","comment":"æ€ä¹ˆä¸è¯´å»ºå»ºç­‘åƒåœ¾å¯ä»¥ä¸€å¹´å¡«å¹³å¤ªå¹³æ´‹å‘¢ã€‚ğŸ‡¨ğŸ‡³","imgsrc":"images/008.jpg"}

           ]

            $scope.pageNum = 1;
            $scope.pageSize = 5;


            $scope.go=function(newPage){
                $scope.pageNum=newPage

                if($scope.pageNum==0){
                    $scope.pageNum=1
                }
                console.log($scope.pageNum)
                if($scope.pageNum>=Math.ceil($scope.data.length/4)){
                    $scope.pageNum=Math.ceil($scope.data.length/4)-1
                }
            }

            $scope.pasts=function(){
                $scope.pageNum=$scope.pageNum-1

                if($scope.pageNum==0){
                    $scope.pageNum=1
                }
            }

            $scope.future=function(){
                $scope.pageNum=$scope.pageNum+1


                if($scope.pageNum>=Math.ceil($scope.data.length/4)){
                    $scope.pageNum=Math.ceil($scope.data.length/4)-1
                }

            }



        })

        myapp.filter("postsFilter",function(){
            return function(productList,pageNum){
                return productList.slice()
            }

        })

        myapp.filter("pagerFilter", function () {
                    /**
                     * productListï¼šè¦è¢«è¿‡æ»¤çš„å•†å“é›†åˆ - æ•°ç»„
                     * pageNum: è¦æ˜¾ç¤ºçš„é¡µç  - æ•´æ•°
                     * pageSizeï¼šé¡µé¢å¤§å°-æ¯é¡µæ˜¾ç¤ºçš„å•†å“æ•°é‡ - æ•´æ•°
                     *
                     * Angularä¸­æä¾›äº†ä¸€äº›å·¥å…·æ–¹æ³•ï¼Œç”¨æ¥åˆ¤æ–­æ•°æ®çš„ç±»å‹
                     */
                    return function (productList, pageNum, pageSize) {
                        // åˆ¤æ–­ä¼ å…¥çš„å‚æ•°ç±»å‹æ˜¯å¦æ­£ç¡®
                        if (angular.isArray(productList) && angular.isNumber(pageNum) && angular.isNumber(pageSize)) {
                            // å…ˆè®¡ç®—èµ·å§‹ç´¢å¼•å€¼ (n-1)*pageSize
                            var startIndex = (pageNum - 1) * pageSize;

                            // å¦‚æœè®¡ç®—çš„èµ·å§‹ç´¢å¼•å€¼è¶…å‡ºäº†æœ€å¤§èŒƒå›´ï¼Œè¿”å›ç©ºæ•°ç»„
                            if (startIndex >= productList.length) {
                                return [];
                            }

                            // ä»startIndexç´¢å¼•å¤„å¼€å§‹ï¼Œæˆªå–pageSizeå¤§å°æ•°é‡çš„å•†å“ï¼Œå¹¶è¿”å›
                            //return productList.splice(startIndex, pageSize);
                            return productList.slice(startIndex, startIndex + pageSize);     // [startIndex,endIndex)
                        } else {
                            return productList; // ä¸å¹²æ¶‰
                        }
                    };
                })
        myapp.filter("pageCountFilter",function(){
                    return function (productList, pageSize){
                        if(angular.isArray(productList) && angular.isNumber(pageSize)){
                            // è®¡ç®—æ€»é¡µæ•°
                            var total = Math.ceil(productList.length / pageSize);

                            // æ ¹æ®æ€»é¡µæ•°ï¼Œæ„é€ ä¸€ä¸ªæ•´æ•°æ•°ç»„ï¼Œå…ƒç´ æ˜¯åºåˆ—æ•´æ•°ï¼Œç„¶åè¿”å›
                            var arr = [];
                            for(var i=0;i<total;i++){
                                arr.push(i+1);  // [1,2,3,...]
                            }
                            return arr;
                        }else{
                            return productList;
                        }
                    };
                });



    </script>
</head>
    <link href="css/index.css" rel="stylesheet">
    <link href="css/bootstrap-theme.min.css" rel="stylesheet"/>
<body ng-app="myapp">
<div class="wrap" ng-controller="myCtrl">
    <h3>æœ€æ–°è·Ÿå¸–</h3>
<div class="top">
    <div class="box" ng-repeat="product in data| pagerFilter:pageNum:pageSize">
        <div class="pic"><img src="{{product.imgsrc}}"></div>
        <div class="right">
            <div class="name">{{product.name}}</div>
            <div class="comment">{{product.comment}}</div>
        </div>
    </div>
</div>
    <div class="bot">
        <a class="go" ng-click="pasts()" >å‰ä¸€é¡µ</a>
        <a class="gos" ng-class="number==pageNum?'red':'' "  ng-repeat="number in data| pageCountFilter:pageSize" ng-click="go(number)" ng-show="number-pageNum<4&&number>=pageNum">{{number}}</a>
        <a class="gos" style="border:none">...</a>
        <!--<a class="go"  ng-click="go(Math.ceil(data.length/4))">å°¾é¡µ</a>-->
        <a class="go" ng-click="future()" >åä¸€é¡µ</a>
    </div>
</div>
<div class="talk">
    <textarea cols=""></textarea>
    <button></button>

</div>

</body>
</html>