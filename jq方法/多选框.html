''<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<script src='js/jquery-3.1.0.js'></script>
	</head>
	<body>
		<div>
			<label>
				<input type="checkbox" name="option" value="option1" />选项1
			</label> 
			<label>
				<input type="checkbox" name="option" value="option2" />选项2
			</label>
			<label>
				<input type="checkbox" name="option" value="option3" />选项3
			</label>
			<label>
				<input type="checkbox" name="options" value="option4" />全选
			</label>
		</div>
	</body>
	
	<script>
	    var arr = [];
	    var aOptionList = $("input[name='option']")
		aOptionList.on('click',function(){
			var index = arr.indexOf($(this).val())
			if( index !== -1){
				arr.splice(index,1)
			}
			else{
				arr.push($(this).val())	
			}
			
			if(arr.length === 3){
				$("input[name=options]").prop('checked',true)
			}
			console.log(arr)
		})
		
		$("input[name=options]").on('click',function(){
			if (arr.length === 3){
				aOptionList.prop('checked',function(i,value){
					value = false
					return value
				})
				$(this).prop('checked',false)
				arr.length=0
				console.log(arr)
			}
			else{
				arr = ['option1','option2','option3']
				aOptionList.prop('checked',function(i,value){
					value = true
					return value
				})
				$(this).prop('checked',true)
				console.log(arr)
			}
			
		})
		
	</script>
</html>
