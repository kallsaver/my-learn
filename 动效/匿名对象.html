<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>无标题文档</title>
</head>

<body>
</body>
<script>
	var a={
			"name":"hoo"
		}
		
		
	function add(obj){
		 //这是一种工厂模式	var e={}	
		var b=[];
		//number不放在DOM元素中 也不放在原始对象add中 而是在函数环境中声明 而是谁调用了add 才会产生number的属性
		b.push({product:obj,number:1})   //匿名对象相当于在函数中var了个e有名对象 这里调用  没有什么特别的   
		return b;  //e的生命周期本被一个闭包引用了   e的生命周期得到延续
		
	}
	
	var c=add(a)
	
	c[0].number++
	
	console.log(c) 
	
	
	function reduce(arr){
		arr.length=0
	}
	reduce(c);  //e的生命周期结束    c不再引用e
	
	
	
	
	
	
	
	
	 
	
	//或者在函数中    如果在另一个函数中 number的生命周期就是other这个函数的生命周期了  这个对象也就被回收了
	function other(){
		var d={"name":"kkk"};
		var f=add(d)
		
		console.log(f)
		//要使得number这个属性继续存活(匿名对象继续存活)  就需要return
		//return f;
	} 
	other()

</script>
</html>
