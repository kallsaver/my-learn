<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<meta name="format-detection" content="telephone=no" />
<meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=no"/>
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black" />
<!-- <link rel="stylesheet" href="http://imgcache.gtimg.cn/vipstyle/mobile/global/mqqui/v1/css/global.css"> -->
<link rel="stylesheet" href="../css/reset.css">
<link rel="stylesheet" href="../css/atom.css">
<link rel="stylesheet" href="../css/global.css">
<link rel="stylesheet" href="../css/open.css">
<title>游戏宝箱</title>
</head>
<body ontouchstart="" class="open-body">
  <div class="wrapper">
    
    <div class="bg rotate"></div>
    <div class="open-has ">
      <h3 class="title-close"><span class="user">德水</span>给你发了一个宝箱</h3>
      <!-- <h3 class="title-open">恭喜你，成功领取<span class="user">德水</span>发的宝箱</h3> -->
      <h3 class="title-open">成功领取<span class="user">一二三四五六</span>发的全民飞机大战宝箱</h3>
      <p class="title-tips">（抽奖券提取后可在<a href="#">QQ手游酷跑月活动</a>中使用）</p>
      <div class="mod-chest">
        
        <div class="chest-close show ">
          <div class="gift"></div>
          <div class="tips">
            <i class="arrow"></i>
          </div>
        </div>
        <div class="chest-open ">
          <div class="mod-chest-cont open-cont">
            <div class="content">
              <div class="gift">
                <div class="icon"><img src="../img/chest-icon-zuan.png"></div> x 500 
              </div>
              <div class="func">
                <button class="chest-btn">查看详情并提取</button>
              </div>
            </div>
          </div>
        </div>
        
      </div>
    </div>
    <div class="open-none" style="display:none">
      <h3>你来晚啦，下次早点吧！</h3>
      <div class="mod-chest">
        <div class="chest-open show"></div>
      </div>
      <div class="func">
        <button class="chest-btn">查看领取详情</button>
      </div>
    </div>
    <div class="chest-notice">
      <input type="checkbox" id="notice-checkbox"/>
      <label for="notice-checkbox">关注道聚城，即时获取宝箱信息</label>
    </div>
  </div>
  <script type="text/javascript" src="../js/zepto.min.js"></script>
<script type="text/javascript">
	
	
	// 思路是点击chest-close之后增加shake的className,这个className带有震动css动画
	// 然后chest-close上监听css动画的结束
	// 然后查找chest-close父元素open-has并加opened的className使得一些相对定位的文字DOM的透明度变为0,另一些相对定位的文字DOM的透明度变为1
	// 然后把chest-close的透明度变为0,依然占位
	// 然后chest-open(文字弹窗)的透明度变为1
	// 最后500ms后chest-open增加blur的className,blur的伪类上有打开宝箱的图片
	
  $(".chest-close").click(function(){

    $(this).addClass("shake");
    var that=this;
    
    this.addEventListener("webkitAnimationEnd", function(){
      $(that).closest(".open-has").addClass("opened");
      $(that).removeClass("show");
      $(that).closest(".mod-chest").find(".chest-open").addClass("show");
      setTimeout(function(){
        $(".chest-open").addClass("blur");
      },500)

    }, false);
  })
</script>
</body>
</html>
  