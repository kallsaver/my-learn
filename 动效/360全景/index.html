<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>
    <style>
        html,body {height:100%;}
        body {margin:0;}
        .box{width:800px;height: 600px;margin: 100px auto;border: 3px solid red;position: relative}
        img {width:640px; height:378px; position:absolute; left:50%; top:50%; margin-top:-189px; margin-left:-320px;}
        #bg {width:100%; height:100%; position:absolute; left:0; top:0; filter:alpha(opacity=60); opacity:0.6; background:black; z-index:1;}

        #prog {width:324px; height:40px; background:url(img/bar.png) no-repeat 0 20px; position:absolute; z-index:2; top:50%; left:50%; margin:-20px 0 0 -162px; font-family:arial; font-size:12px; color:#fff; text-align:center;}
        #prog span {font-family:"宋体";}
        #bar {width:0%; height:16px; background:url(img/bar_line.gif) repeat-x; overflow:hidden; position:absolute; bottom:2px; left:2px;}
    </style>
</head>
<body>
<div class="box">
    <img id="img1" src="img/miaov (0).jpg" />
    <div id="bg"></div>
    <div id="prog">
    —360度全景展示 载入中......<span>0%</span>
        <div id="bar"></div>
    </div>
</div>
</body>
<script src="jquery-2.1.1.min.js"></script>
<script>
    $(function(){
        var SCAIE=10;
        var iImgCount=77;
        var iLoaded=0;

        //加载所有的资源；
        for(var i=0;i<iImgCount;i++){
            (function (i) {
                setTimeout(function(){
                    var oNewImg=new Image();
                    oNewImg.src='img/miaov ('+i+').jpg';
                    oNewImg.onload=function(){
                        $("span").text(Math.ceil(100*iLoaded/iImgCount)+"%");
                        $("#bar").width(Math.ceil(100*iLoaded/iImgCount)+"%");
                        oNewImg.onload=null;    //为什么要把指针清空

                    }

                iLoaded++;
                },i*100)
            })(i)
        }


    })

</script>
</html>