<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>无标题文档</title>
<style>
*{margin:0;padding:0;font-size:0px;}

ul{list-style:none;}
.box{width:200px;border:1px solid #ccc;position:absolute;top:100px;right:30px;border-top:none;}
a{display:block;height:30px;line-height:30px;font-size:12px;text-decoration:none;}
.big>li{}
.big>li>a{color:#ccc;padding-left:2em;border-bottom:1px solid #ccc;border-top:1px solid #ccc;background:url(a2.png) no-repeat 170px center;background-color:#9F6C8F}
/*这个导航条的妙处在于在ul上设overflow 这样只要ul的高度变为0 下面的所有元素都看不见了 而不直接去逐个改变子元素的样式*/
.big li ul{height:0px;overflow:hidden;}
.big li ul li{}
.big li ul li a{color:black;text-align:center;margin-left:0em;display:block;}
.big li .showMenu{background:url(a1.png) no-repeat 170px center;}
.big li .active{color:#fff; background-color:#4DBFE1}
.big li ul  .ac{background:#4aaee2}
</style>
<script src="tools.js"></script>
<script>
//tools.run(box,2000,{"width":500},function(){
	
//移动到li上li变色  点击li  其他的li的子元素收起来 自己的子元素展开 再次点击 自己的子元素也收起来  并且有动画缓冲的效果 
window.onload=function(){
	var big=document.getElementsByClassName("big")[0];
	var aLi=big.children;

	for(var i=0;i<aLi.length;i++){
		
		aLi[i].onmouseenter=function(){
			//节点的children是从0开始的
			
			//if else 语句  if的优先级最高
			if(this.children[0].className=="active showMenu"){
				this.children[0].className=="active showMenu";
			}
			
			else{
				for(var m=0;m<aLi.length;m++){
					if(aLi[m].children[0].className=="active showMenu"){
						aLi[m].children[0].className=="active showMenu"
					}
					else{
					aLi[m].children[0].className="";
					
					}
				}
		
			}
			
			this.onclick=function(){
					
					
					//var _this=this;
					
					
					//这里很重要 如果这个li是被点击过的 那么再点击它 把它的ul关闭
					if(this.children[0].className=="active showMenu"){
						//this指的是 aLi[i]   tools是个对象 run是它的一个key 这个key的值是一个函数 调用函数的是aLi
						tools.run(this.children[1],500,{"height":0},null);
						this.children[0].className="";
					}
					
					else{
					
					  for(var j=0;j<aLi.length;j++){
						  //所以li下的ul的高度变0      a上面的箭头收起来
						  tools.run(aLi[j].children[1],500,{"height":0},null);
						  aLi[j].children[0].className="";
					  }
										
					//自己的ul高度变成子元素的适应高度 箭头展开			
					tools.run(this.children[1],500,{"height":_this.children[1].children.length*30},null);
					
					this.children[0].className="active showMenu";				
					}
					
					
				    //鼠标滑上ul的子元素  会变色 离开变回原来的颜色
					for(var k=0;k<this.children[1].children.length;k++){
						
						this.children[1].children[k].onmouseenter=function(){
							this.className="ac"
						}
						
						this.children[1].children[k].onmouseleave=function(){
							this.className=""
						}
					}
				
			}			
		}
		
		

	}
}

</script>


</head>

<body>
<div class="box">
	<ul class="big">
    	<li>
        	<a href="#">新闻中心</a>
        	<ul>
            	<li><a href="javascript:;">添加新闻</a></li>
            	<li><a href="javascript:;">添加新闻</a></li>
            	<li><a href="javascript:;">添加新闻</a></li>
            	<li><a href="javascript:;">添加新闻</a></li>
            	<li><a href="javascript:;">添加新闻</a></li>
            </ul>        
        </li> 
        
    	<li>
        	<a href="#">关于我们</a>
        	<ul>
            	<li><a href="javascript:;">添加新闻</a></li>
            	<li><a href="javascript:;">添加新闻</a></li>
            	<li><a href="javascript:;">添加新闻</a></li>
            	<li><a href="javascript:;">添加新闻</a></li>
            </ul>        
        </li>
         
    	<li>
        	<a href="#">业务系统</a>
        	<ul>
            	<li><a href="javascript:;">添加新闻</a></li>
            	<li><a href="javascript:;">添加新闻</a></li>
            	<li><a href="javascript:;">添加新闻</a></li>
            	<li><a href="javascript:;">添加新闻</a></li>
            	<li><a href="javascript:;">添加新闻</a></li>
            	<li><a href="javascript:;">添加新闻</a></li>
            </ul>        
        </li> 
        
    	<li>
        	<a href="#">招商联盟</a>
        	<ul>
            	<li><a href="javascript:;">添加新闻</a></li>
            	<li><a href="javascript:;">添加新闻</a></li>
            	<li><a href="javascript:;">添加新闻</a></li>
            	<li><a href="javascript:;">添加新闻</a></li>
            </ul>        
        </li> 

    </ul>
</div>
</body>
</html>
