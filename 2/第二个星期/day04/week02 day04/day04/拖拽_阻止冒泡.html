<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>无标题文档</title>
<style>
*{ margin:0; padding:0}
#box{ width:200px; height:200px; background:red; position:absolute}
p{ width:800px; background:#ddd; word-break:break-all}

</style>
</head>

<body>
<div id="box">
	<input type="text">
</div>
</body>
</html>

<script>
	var oDiv=document.getElementById('box');
	var oInput=document.getElementsByTagName('input')[0];
	
	//阻止冒泡
	oInput.onmousedown=function(ev){
		var oEv=ev || window.event;
		oEv.cancelBubble=true;
	};
	
	
	oDiv.onmousedown=function(ev){
		//记录偏移量 鼠标坐标--div的offsetLeft
		var oEv=ev || window.event;
		var disX=oEv.clientX-this.offsetLeft;//distance
		var disY=oEv.clientY-this.offsetTop;//distance
		
		
		//document开始移动
		document.onmousemove=function(ev){
			var oEv=ev || window.event;
			var l=oEv.clientX-disX;//横坐标
			var t=oEv.clientY-disY;//纵坐标
			
			if(l<0){
				l=0;
			};
			if(l>document.documentElement.clientWidth-oDiv.offsetWidth){
				l=document.documentElement.clientWidth-oDiv.offsetWidth
			};
			if(t<0){
				t=0;
			};
			if(t>document.documentElement.clientHeight-oDiv.offsetHeight){
				t=document.documentElement.clientHeight-oDiv.offsetHeight
			}
			
			//屏幕宽度document.documentElement.clientWidth;
			
			oDiv.style.left=l+'px';
			oDiv.style.top=t+'px';
		};
		
		//document解除移动
		document.onmouseup=function(){
			document.onmousemove=document.onmouseup=null;
		};
		
		return false;//阻止默认事件
	
	}
	
	
	


</script>

