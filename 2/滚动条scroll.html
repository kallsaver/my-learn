<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>无标题文档</title>
<style type="text/css">
*{margin:0px;padding:0px;}
.box{width:400px;height:500px;border:1px solid #000;margin:100px;position:relative;}

.box>p{position:absolute;padding-right:30px;}

.scroll{width:25px;height:50px;background:#ccc;position:absolute;top:0px;right:0px;}

</style>

<script>
window.onload=function(){
	var box=document.getElementsByClassName("box")[0];	
	var p=document.getElementsByTagName("p")[0];	
	var scroll=document.getElementsByClassName("scroll")[0];
	
	scroll.onmousedown=function(ev){
		ev=ev||event;
		
		//scroll.offsetTop的值是定位中在父元素的定位值,不再是距离屏幕上部的值了
		var disY=ev.clientY-this.offsetTop-box.offsetTop;
		
		//box.offsetHeight要算上box的边框线的
		//alert(box.offsetHeight)
		console.log(event.target)
		
		document.onmousemove=function(ev){
			console.log(4)
			ev=ev||event;
			scroll.style.top=ev.clientY-disY-box.offsetTop+"px";
			//设定滚动条的移动范围-------------------
			if(ev.clientY-disY<box.offsetTop){
				scroll.style.top=0+"px";
				return;
			}
			
			//条件句左边是变化的,右边是常量
			if(ev.clientY-box.offsetTop-1-disY>box.offsetHeight-2-scroll.offsetHeight){
				scroll.style.top=box.offsetHeight-scroll.offsetHeight-2+"px";
				return;
			}
			
			//------------------------------------
			
			var rate=(scroll.offsetTop)/(box.offsetHeight-2-scroll.offsetHeight);
			//console.log(rate);
			
			p.style.top=-rate*(p.offsetHeight-box.offsetHeight)+"px";
			
		}
		
		document.onmouseup=function(ev){
			document.onmousemove=null;
		}
		
		return false;
		
	}
	
	
		
}

</script>

</head>

<body>
<div class="box">
  <div class="scroll"></div>
  <p>©2004-2014 uc.cn 版权所有 网络文化经营许可证：文网文[2010]176号
  中华人民共和国互联网药品信息服务资格证：（粤）-非经营性-2011-0120
  增值电信业务经营许可证: 粤B2-20070379 粤ICP备092102004-2014 uc.cn 版权所有 网络文化经营许可证：文网文[2010]176号中华人民共和国互联网药品信息服务资格证：（粤）-非经营性-2011-0120
  增值电信业务经营许可证: 粤B2-20070379 粤ICP备09210879中华人民共和国互联网药品信息服务资格证：（粤）-非经营性-2011-0120增值电信业务经营许可证: 粤B2-20070379 粤ICP备092102004-2014 uc.cn 版权所有 网络文化经营许可证：文网文[2010]176号中华人民共和国互联网药品信息服务资格证：（粤）-非经营性-2011-0120号879号-非经营性-2011-0120增值电信业务经营许可证: 粤B2-20070379 粤ICP备0-非经营性-2011-0120增值电信业务经营许可证: 粤B2-20070379 粤ICP备0-非经营性-2011-0120增值电信业务经营许可证: 粤B2-20070379 粤ICP备0-非经营性-2011-0120增值电信业务经营许可证: 粤B2-20070379 粤ICP备0-非经营性-2011-0120增值电信业务经营许可证: 粤B2-20070379 粤ICP备0-非经营性-2011-0120增值电信业务经营许可证: 粤B2-20070379 粤ICP备0-非经营性-2011-0120增值电信业务经营许可证: 粤B2-20070379 粤ICP备0-非经营性-2011-0120增值电信业务经营许可证: 粤B2-20070379 粤ICP备0-非经营性-2011-0120增值电信业务经营许可证: 粤B2-20070379 粤ICP备0
  </p>
</div>



</body>
</html>
