<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>无标题文档</title>
<style>
*{margin:0px;padding:0px;font-size:0px;}
.big{width:900px;margin:200px auto;}
.box{width:500px;height:300px;border:1px solid black;padding:20px;}
.box p{float:left;padding:0px 50px 0px 8px;line-height:40px;font-size:18px;background:#ccc;margin:10px;position:relative;}

.box p span{width:14px;height:14px;font-size:12px;line-height:14px;background:#fff;text-align:center;margin:5px 5px 0px 0px;right:0px;top:0px;position:absolute;cursor:default;}

button{padding:0px 15px;line-height:40px;font-size:18px;background:#ccc;margin-right:7px;}
</style>

<script>
//点击相应的button出现相应的标签  再点击这个button的时候 如果已经有这个标签就不会再生成这个标签
window.onload=function(){
	var arr=["宅男","IT发烧友","宅女","驴友","渣渣","微博控"]
	var big=document.getElementsByClassName("big")[0];
	var box=document.getElementsByClassName("box")[0];
	var aButton=document.getElementsByTagName("button");
	
	//设置行内样式能看的见的自定义属性
	for(var i=0;i<aButton.length;i++){
	var n=0;	
		
		//index是个变量 在设置自定义属性时外面要加"" 后面跟着的是属性值 这里的index变量的数据类型是number
		aButton[i].setAttribute("index",i);
		aButton[i].onclick=function(){
				
			//这里的p,span是局部对象  不能在整体找到  
				var p=document.createElement("p");
				p.innerHTML=arr[this.getAttribute("index")];
				
				var span=document.createElement("span");
				span.innerHTML="×";
				p.appendChild(span);
				
				for(var j=0;j<box.children.length;j++){
					 
					//一旦找到属性相同的 ,立刻跳出函数
					
					//这里的break很重要 如果没有break 会执行整个循环 n的值会是最后子元素判断的值
					if(box.children[j].getAttribute("index")==this.getAttribute("index")){ 
						n=1; alert("标签已经存在"); break;}
					else{
						n=0;	
					}
			    }
				//console.log(n)
				if(n==0){
				box.appendChild(p);
				p.setAttribute("index",this.getAttribute("index"));
				}
				
				//关闭有两种方法 一种是通过找到节点的父级把节点关闭  一种是通过已经存在的父级事件委托 
				
/*				span.onclick=function(){
					//用原生的函数移除对象 必须找到他的父级
					p.parentNode.removeChild(p);
					//this.parentNode.parentNode.removeChild(p);
					n=0;
				}	*/
				
				
				
				
		}
			
	}
	
	
	
}

</script>

</head>

<body>
<div class="big">
      <div class="box">
      <!--<p>宅男<span>×</span></p>
      <p>IT发烧友<span>×</span></p>
      <p>宅女<span>×</span></p>
      <p>驴友<span>×</span></p>
      <p>渣渣<span>×</span></p>
      <p>微博控<span>×</span></p>-->
      </div>
      <button type="button">宅男</button>
      <button type="button">IT发烧友</button>
      <button type="button">宅女</button>
      <button type="button">驴友</button>
      <button type="button">渣渣</button>
      <button type="button">微博控</button>
</div>
</body>
</html>
