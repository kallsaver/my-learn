<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        *{margin: 0;padding: 0;}
        .slide{margin: 100px auto;height: 409px;width: 100%;overflow: hidden}
        .pic{height: 100%;transform-style: preserve-3d;perspective:1500px;width:1000px;margin: 0 auto;position: relative}
        .previous{position: absolute;width: 45px;height: 45px;top:50%;left: -60px;z-index: 8}
        .next{position: absolute;width: 45px;height: 45px;top:50%;right: -60px;z-index: 8}
        .pic .img{transform: rotateX(0deg);transform-origin: bottom;position: absolute;}
        .pic .img:nth-of-type(1){z-index: 3}
        .pic .img:nth-of-type(6){z-index: 4;transform: rotateX(-90deg);opacity: 0}
        .model{position: absolute;width: 100%;height: 100%;z-index: 10;background-color: peru;opacity: 0.3;top:0px;left: 0px;}
    </style>
    <script src="jQuery_lib/jquery-3.1.0.js"></script>
    <script>
        $(function(){

            function modellayer($obj){
                //返回值就是那个膜
                var a=$("<div class='model'></div>").appendTo($obj).click(function(e){
                    e.stopPropagation();
                })
                return a
            }

            /*$("img").each(function(index){
                $(this).css({"z-index":8-index})
            })*/
            var page=0;
            var runtime=1;
            $(".img").css({"transition": "transform "+runtime+"s ease-in"})


            $(".previous").click(function(){
                var model1=modellayer($(this))
                var model2=modellayer($(".next"))

                if(page<0){
                    page=5
                }
                console.log(page)
               //
                $(".img").eq(page+1).css({"z-index":1})
                //本页index变为 1(等级靠前,挡住第6张图片自带的覆盖)
                $(".img").eq(page).css({"z-index":2})
                //前面一张显示在pic盒子中
                $(".img").eq(page==0?5:page-1).css({"z-index":3}).css({"transform": "rotateX(0deg)"}).animate({"opacity":1},2000)
                //前面第2张在-90deg位置
                $(".img").eq(page==0?4:page-2).css({"z-index":4}).css({"opacity":0}).css({"transform": "rotateX(-90deg)"}).animate({"opacity":0},1000,function(){
                    $(this).css({"opacity":0})

                    //jquery中删除元素是不用找父级元素的   remove前面写jq对象 （）里面不写内容删除自己  （）里面写选择器 删除匹配的子元素
                    model1.remove()
                    model2.remove()
                })

                page--



            })

            $(".next").click(function(){

                var model1=modellayer($(this))
                var model2=modellayer($(".previous"))

                if(page>5){
                    page=0;

                }
                //本页旋转-90deg
                $(".img").eq(page).css({"z-index":4}).css({"transform": "rotateX(-90deg)"}).animate({"opacity":0},2000)
                //后面一张显示在pic盒子显示中
                $(".img").eq(page==5?0:page+1).css({"z-index":3})
                //前面一张回到pic盒子隐藏中(等级靠后)             animate和transform的兼容性不行    animate里面一定要写东西才可以变成延时器
                $(".img").eq(page==0?5:page-1).css({"z-index":1}).css({"opacity":0}).css({"transform": "rotateX(0deg)"}).animate({"opacity":0},2000,function(){
                    $(this).css({"opacity":1})
                    model1.remove()
                    model2.remove()
                })

                page++
            })


        })

    </script>
</head>
<body>
    <div class="slide">
        <div class="pic">
            <img class="img" src="img/1.jpg">
            <img class="img" src="img/2.jpg">
            <img class="img" src="img/3.jpg">
            <img class="img" src="img/4.jpg">
            <img class="img" src="img/5.jpg">
            <img class="img" src="img/6.jpg">
            <div class="previous"><img src="img/l.png" ></div>
            <div class="next"><img src="img/r.png"></div>
        </div>

    </div>
</body>
</html>