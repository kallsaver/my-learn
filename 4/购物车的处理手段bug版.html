<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>无标题文档</title>
<script src="day4/jQuery_lib/jquery-3.1.0.min.js"></script>
<style>
	ul{list-style:none;width:600px;background:peru;margin:100px auto;}
	li{margin-bottom:50px;width:500px;height:50px;background:red;color:#fff;text-align:center;line-height:50px;font-size:20px;position:relative}
	li>span{width:100px;height:30px;position:absolute;top:5px;right:5px;background:#2A6494;display:block;line-height:30px;}
	li>div{position:absolute;width:100px;height:30px;top:5px;left:5px;background:#C1B562;line-height:30px;}
	#buy{width:100px;height:40px;position:absolute;right:100px;top:20px;background:#B32B66;text-align:center;color:#fff;line-height:40px;}

</style>
</head>

<body>
<ul id="car"></ul>
<div id="buy"></div>


</body>
<script>



		var products=[
            {name:"火星商品01",category:"商品类别01",price:100,desc:"2016流行新款",imgsrc:"images/TB1_50x50.jpg"},
            {name:"火星商品02",category:"商品类别01",price:120,desc:"2016流行新款",imgsrc:"images/TB2_50x50.jpg"},
            {name:"火星商品03",category:"商品类别01",price:80,desc:"2016流行新款",imgsrc:"images/TB3_50x50.jpg"},
            {name:"火星商品04",category:"商品类别01",price:85,desc:"2016流行新款",imgsrc:"images/TB4_50x50.jpg"},
            {name:"火星商品05",category:"商品类别01",price:820,desc:"2016流行新款",imgsrc:"images/TB1_50x50.jpg"},
            {name:"火星商品06",category:"商品类别02",price:180,desc:"2016流行新款",imgsrc:"images/TB2_50x50.jpg"}
        
        ]
		
		var cart=[];
		//
		var mathtool={
			//cart:[],
			add:function(product){
				//先判断cart中是否有这件商品  如果有 count++
				//如果没有cart.push(product)
				for(var i=0;i<cart.length;i++){
					if(cart[i].item.name==product.item.name){
						alert(1)
						product.count++
						return;
					}
				}
				//如果执行到这里  说明cart中没这个对象
				console.log(product.item.name)
				//全局变量居然可以进入字面量中来  可怕
				//console.log(cart[0].item)  //javascript的秘密
				//调试的时候不要给cart[0] 因为cart一开始是空的 
				//给cart[0]会带偏 cart[0]的属性值
				cart.push(product)
			},
			
			
		}

		
		//jquery中的data专门给元素存放数据  前面的参数是key,后面是value   购物车value通常是个对象
		for(var i=0;i<products.length;i++){
			$("<li></li>")
			.text(products[i].name)		
			.appendTo("#car")
			.append("<div>add</div><span>reduce</span>").find("div")
			//DOM元素存入对应的商品  data的key值不是字符串,可以是对象
			.data("product",{item:products[i],count:1})
			.click(function(){
				mathtool.add($(this).data("product"))	
				//console.log(mathtool.car)
			})
		}
		
		
		

</script>
</html>
