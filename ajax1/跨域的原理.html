<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
	</head>
	<body>
	</body>
	<script>
		//参考文献:http://www.cnblogs.com/yunfeifei/p/4138632.html
		//服务端响应数据返回给浏览器的时候，
		//浏览器根据响应头的Access-Control-Allow-Origin字段的值来判断是否有权限获取数据，
		//一般情况下，服务器端如果没有在这个字段做特殊处理的话，跨域是没有权限访问的，所以响应数据被浏览器给拦截了，
		//所以现在ajax跨域的问题可以转化为数据怎么拿回客户端的问题。
		
		
		var GetData = function (data) {
     	 	console.log(data);
     	 	//删除为跨越而新建的script标签
     	 	var head = document.getElementsByTagName('head')[0];
     	 	var script = head.getElementsByTagName('script')[0];
     	 	head.removeChild(script)
   		};
    	function GetAjaxData(){
    		//?callback=GetData告诉服务端,该页面的数据作为参数传入一个函数中,这个函数的名字是客户端的GetData()
        	var url = "http://api.douban.com/v2/movie/in_theaters?callback=GetData";
        	var script = document.createElement('script');
        	script.setAttribute('src', url);
        	var head = document.getElementsByTagName('head')[0];
        	//insertBefore两个必填参数,一个是插入的元素,一个是该元素插入前面的位置节点
        	head.insertBefore(script,head.getElementsByTagName('script')[0]||null); 
   		}
    	
    	GetAjaxData()
		
		
		function run(a,b){
			console.log(a,b)
		}
		//传参也可以用||
		run(1,document.getElementsByTagName('head')[0].getElementsByTagName('script')[4]||null)
		
	</script>
</html>
