<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<style type="text/css">
			*{margin:0;padding: 0;}
			li{
				list-style: none;line-height: 50px;background: peru;margin-bottom: 50px;
				font-size: 20px;text-align: center;color: #fff;
			}
			.box{
				width:100px;height: 100px;background: green;
			}
		</style>
	</head>
	<body>
		<div id="app">
			<ul v-if="show">
				<li v-for="item of product" v-text="item.name"></li>
			</ul>
			<div class="box" v-on:click="changeProduct()"></div>
		</div>
	</body>
	<script src="js/vue2.0.js"></script>
	<script>
		
		var app = new Vue({
			el : '#app',
			data : {
				product : [
					{ name : 'a' , price : 300 },
					{ name : 'b' , price : 100 },
					{ name : 'c' , price : 150},
					{ name : 'd' , price : 200 },
				],
				show : true,
			},
			mounted : function(){
				
				var vm = this;
				
				vm.$nextTick(function(){
					console.log(1)
				});
				
			},
			methods : {
				changeProduct : function(){
					var vm = this;
					vm.show = false;
					vm.product.push({ name : 'e' , price : 300 });
					setTimeout(function(){
						vm.show = true;
					},1000)
				}
			},
			watch : {
				product : {
					deep : true,
					handler : function(newVal,oldVal){
						console.log(77);
						// 同一个指针
						console.log(newVal === oldVal)
					}
				}
			}
//			watch : {
//				product : {
//					handle : function(){
//						console.log(44)
//					}
//				}
//			}
		});
		
		// 只执行一次,监听数据->视图的渲染完成,可以多次使用
		app.$nextTick(function(){
			console.log(2)
		});
		
//		app.$watch('product',function(val){
//			console.log(44)
//		})
		
	</script>
</html>
