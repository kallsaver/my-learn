<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<title></title>
		<style type="text/css">
			* {
				margin: 0;
				padding: 0;
			}
			
			#app {
				text-align: center;
				position: relative;
			}
			
			div {
				margin: 0 auto;
				margin-bottom: 50px;
			}
			
			.asides {
				width: 600px;
				height: 400px;
				background: peru;
				line-height: 400px;
				color: #fff;
				text-align: center;
				font-size: 20px;
			}
			
			.mains {
				width: 600px;
				height: 600px;
				background: chocolate;
				line-height: 400px;
				color: #fff;
				text-align: center;
				font-size: 20px;
			}
			
			li {
				list-style: none;
				line-height: 50px;
				color: #fff;
				text-align: center;
				font-size: 20px;
				background: khaki;
			}
			
			p {
				line-height: 50px;
				color: #fff;
				text-align: center;
				font-size: 20px;
				background: cornflowerblue;
			}
			
			span {
				width: 100px;
				height: 50px;
				position: absolute;
				top: 400px;
				background: chartreuse;
				color: #fff;
			}
		</style>
	</head>

	<body>
		<div id="app">
			<!--把父组件的message穿到子组件的props中去-->
			<center-main 
				v-bind:pass1="message" 
				v-bind:pass2="product"
				v-bind:pass3="newProperty"
				v-bind:pass4="obj"
			></center-main>
		</div>
	</body>
	<script src="js/vue2.0.js"></script>
	<script src="js/vue1.0.js"></script>
	<script>
		// vue中不推荐使用$,_开头定义data里面的属性,会出现一些视图更新不了的bug
		// https://www.cnblogs.com/fayin/p/8205300.html
		
		var father, son;

		var vm = new Vue({
			el: "#app",
			data: {
				product: [
					{
						name: 'vue'
					},
					{
						name: 'jquery'
					},
					{
						name: 'angular'
					},
					{
						name: 'react'
					},
				],
				message: '父组件的信息',
				newProperty: '父组件的属性但是子组件没有这个属性',
				obj: {
					name: 'obj'
				}
			},
			created: function() {
				var vm = this;
				father = vm.product;
			},
			methods: {
				addProduct: function() {
					vm.product.push({
						name: 'new  learn'
					});
				}
			},
			components: {
				'center-main': {
					template: `<div class="mains">
									<ul>
										<li v-for="item in products" v-text="item.name"></li>
									</ul>
									<p v-text="pass1"></p>
									<ul>
										<li v-for="item in pass2" v-text="item.name"></li>
									</ul>
									<p v-on:click="showProps()">showData</p>
									<p>{{selfMessage}}</p>
									<p>{{pass3}}</p>
									<p>{{pass4.name}}</p>
								</div>`,
					data: function() {
						return {
							products: [
								{
									name: 'php'
								},
								{
									name: 'node'
								},
								{
									name: 'go'
								},
								{
									name: 'python'
								},
							],
							selfMessage: ''
						};
					},
					// 组件component中的DOM是独立的,不能直接拿到外部的数据
					// 通过props来存值, v-bind是个黑科技
					props: ['pass1', 'pass2', 'pass3', 'pass4'],
					methods: {
						showProps: function() {
							var vm = this;
							//console.log(vm.$props);
						}
					},
					beforeCreate: function() {
						var vm = this;
						// 同样的beforeCreate阶段无论是data里面的数据还是props里面的数据,都没有挂载进来
						//console.log(vm.$props);
					},
					created: function() {
						var vm = this;
						//console.log(vm.$props.pass2);
						//son = vm.$props.pass2;
						// true 同一个指针的
						//console.log(father === son);
						console.log(vm.pass2);
						// true 同一个指针的
						//console.log(vm.pass2 === vm.$props.pass2);
						// 因为传的是指针,所以修改$props上的引用数据类型属性会报错无法运行
//						setTimeout(function(){
//							vm.pass2 = [
//								{
//									name: 'no'
//								}
//							]
//						}, 1000)
						
						// 如果是对象指针的属性改变是不会报错
						setTimeout(function(){
							vm.pass4.name = 'new obj';
						}, 1000)
						// 如果是直接在$props上,基本数据类型也会报错,但是会正常运行
						// vue是不建议改变props带过来的参数的
//						setTimeout(function(){
//							vm.pass1 = 'new message'
//						}, 1000)
						vm.selfMessage = vm.pass1;
						// vue2是不建议改变props带过来的参数的
						setTimeout(function(){
							vm.selfMessage = 'new message';
							console.log(vm.$data)
						}, 1000);
					}
				}
			}
		})
	</script>

</html>