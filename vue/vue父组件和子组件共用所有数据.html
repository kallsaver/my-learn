<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<style type="text/css">
			*{margin:0;padding: 0;box-sizing: border-box;}
			.clear:after{
		        content:"";display:block;
		        font-size:0;line-height:0;
		        clear:both;*zoom:1;
		        margin: 0;padding: 0;
			}
			#app{
				text-align: center;position: relative;
			}
			.asides{
				width:600px;height: 400px;background: peru;
				line-height: 400px;color: #fff;text-align: center;font-size: 20px;
			}
			.mains{
				width:600px;height: 600px;background: chocolate;
				line-height: 400px;color: #fff;text-align: center;font-size: 20px;
			}
			li{
				list-style: none;line-height: 50px;color: #fff;
				text-align: center;font-size: 20px;background: khaki;
			}
			p{
				line-height: 50px;color: #fff;text-align: center;font-size: 20px;background: cornflowerblue;
			}
			span{
				width:100px;height: 50px;position: absolute;
				top:400px;background: chartreuse;color: #fff;
			}
			.modal{
				position: fixed;top:-1px;bottom:-1px;
				width:100%;background-color: rgba(0,0,0,0.6);
			}
			.modal-content{
				position: absolute;width:250px;background:#fff;
				padding-top:20px;height:100px;text-align: center;
				margin-left:-125px;top:50%;margin-top:-50px;left:50%;
			}
			.modal-title{
				line-height: 28px;font-size: 20px;color: #666;
				padding-bottom: 20px;
			}
			.modal-btn{
				
			}
			.modal-cancel{
				float:left;width:125px;height: 30px;line-height: 30px;
			}
			.modal-confirm{
				float: right;width:125px;height: 30px;line-height: 30px;
			}
			            a{ display: inline-block; width: 10px;height:5px; background: red;line-height: 0;font-size:0;vertical-align: middle;-webkit-transform: rotate(45deg);}
      a:after{content:'/';display:block;width: 20px;height:5px; background: red;-webkit-transform: rotate(-90deg) translateY(-50%) translateX(50%);}
		</style>
		<script src="js/vue2.0.js"></script>
		<script>
			
			Vue.component('modal',{
		        template : '<div class="modal" v-if="modalData.show">'
		                        +'<div class="modal-content">'
		                            +'<div class="modal-title" v-text="modalData.title"></div>'
		                            +'<div class="modal-btn clear">'
		                                +'<div class="modal-cancel" v-on:click="modalData.cancel()">取消</div>'
		                                +'<div class="modal-confirm" v-on:click="modalData.confirm()">确定</div>'
		                            +'</div>'
		                        +'</div>'
		                    +'</div>',
		        // 组件component中的DOM是独立的,不能直接拿到外部的数据
				// 通过props来存值, v-bind是个黑科技
				// 并且是指针
				props : ['alldata'],
		        data : function(){
		        	return {
		        		modalData : {
		        			show : false
		        		},
		        	}
		        },
		        methods : {
		        	
		        },
		        mounted : function(){
		        	var vm = this;
		        	//console.log(vm.$props.pass1);
		        	// 把父组件的变量的指针给到子组件,从此父组件更新这一变量,子组件也同时更新
		        	console.log(vm.$props)
		        	vm.$data = vm.$props.all;
		        	console.log(vm.$props)
		        },
		    });
		    
		    Vue.prototype.showModal = function(option){
		        var vm = this;
		        option.show = true;
		        // 指针
		        for(var key in option){
		        	vm.modalData[key] = option[key]
		        }
		        
		        var confirm = {
		        	confirm : true , cancel : false
		        };
		        
        		var cancel = {
        			confirm : false , cancel : true
        		};
		        
		        vm.modalData.confirm = function(){
		        	vm.modalData.show = false;
		        	option.success.bind(vm.modalData,confirm)();
		        }
		        
		        vm.modalData.cancel = function(res){
		        	vm.modalData.show = false;
		        	// 在函数申明的时候预定绑定参数
		        	option.success.bind(vm.modalData,cancel)();
		        }
		    }
		    
		    Vue.prototype.modalData = {
		    	show : true,
		    	title : '确定要取消吗？',
		    }
		    
		    
		</script>
	</head>
	<body>
		<div id="app">
			<ul>
				<li v-for="item in list" v-on:click="deletedLi(item)" v-text="item.name"></li>
			</ul>
			<modal v-bind:alldata="this.$data" v-hidden></modal>
			<a></a>
		</div>
	</body>
	<script>
		new Vue({
			el : '#app',
			data : {
				list : [
					{ 'name' : 'vue'},
					{ 'name' : 'react'}
				],
				add : {
					text : '哈哈哈'
				},
				showPopup : true,
			},
			mounted : function(){
				var vm = this;
				console.log('父',vm.modalData)
			},
			methods : {
				deletedLi : function(item){
					var vm = this;
					vm.showModal({
						title : '确定要取消订单吗？',
						success : function(res){
							//console.log('成功了')
							if(res.confirm){
								console.log('成功了');
							}else if(res.cancel){
								console.log('取消了')
							}
						}
					});
				}
			}
		})
		
	</script>
</html>
