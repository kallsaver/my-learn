<!DOCTYPE html>
<html ng-app="myApp">
	<head>
		<meta charset="UTF-8">
		<title></title>
		<style>
			*{margin:0;padding: 0;}
			div.box{
				width: 300px;height: 50px;background: peru;border-radius: 5px;
				color: #fff;text-align: center;line-height: 50px;
			}
		</style>
	</head>
	<body ng-controller="myCtrl">
		
		<ng-view></ng-view>
	</body>
	<script src="js/angular.js"></script>
	<script src="js/angular-route.min.js"></script>
	<script>
		var other = angular.module('other',['ngRoute']);
		other.config(['$routeProvider',function($routeProvider){
			$routeProvider
			.when('/home/:page',{
      			templateUrl : 'views/home.html',
      			controller : 'navCtrl'
   			})
			.when('/product',{
      			templateUrl : 'views/product.html',
   			})
		}])
		//每次使用了$route.updateParams,ng-view的controller都会重新执行一遍
		.controller('navCtrl',['$scope','$route','$routeParams',function($scope,$route,$routeParams){
			console.log('navCtrl执行');
			console.log($routeParams.page);
			$scope.currentPage = parseInt($routeParams.page);
			//url地址先生成=>路由拿到template页面=>ng-view页面渲染
			//url地址的page值=>$scope.currentPage=>$scope.currentPage++ =>url地址的page值=>url地址的page值
			//上面的过程循环
			$scope.run = function(page){     //传进来的是currentPage
				$scope.currentPage ++;
				$route.updateParams({
					page : $scope.currentPage
				})
			}
		}])
		
		var app = angular.module('myApp',['ngRoute','other']);
		app.config(['$routeProvider',function($routeProvider){
			$routeProvider.otherwise({redirectTo: '/home/1'});
		}])
		.controller('myCtrl',['$scope',function(){
			console.log('myCtrl执行')
		}])
		
		
		
	</script>
</html>
